<!--=============================Extending the base template=================-->

{% extends 'LDMSApp/base.html' %}
{% load static %}
{% load crispy_forms_tags %}

<!--=============================End of Extension=============================-->


<!--=============================Beginning of Title Block=====================-->
{% block title %}
LDMS | Home
{% endblock title %}
<!--=============================End of title Block=============================-->

<!--=============================Beginning of Content Block=====================-->
{% block content %}
<section class="home-bg">
	<h2 id="successNoRefresh"></h2>
	<div class="container-fluid">
		<div class="row text-capitalize fw-bolder">
			<div class="col-12 col-md-2">
				<small class="text-center text-light typing-text">Notifications</small>
				<div class="scrole">
					{% for test in all_test_requested %}
						<div class="row">
							<div class="col-12 d-flex d-inline-block py-2 mx-2 border border-secondary">
								<small class="text-light fw-bolder">{{test.type_of_test|truncatechars:15}}-{{test.department|truncatechars:8}} <button type="button" data-bs-toggle="modal" data-bs-target="#{{test.department}}" title="patient id = {{test.specimen_id}}" class="text-decoration-underline">view</button></small>
								<div>
							<!-- Modal -->
							<div class="modal fade" id="{{test.department}}" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
								<div class="modal-dialog modal-dialog-scrollable">
									<div class="modal-content">
										<div class="modal-header">
											<h1 class="modal-title fs-5" id="staticBackdropLabel">Details</h1>
											<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
										</div>
										<div class="modal-body">
											<form method="POST">
											<p>{{test.description}}</p>
										</div>
										<div class="modal-footer">
											<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
											<input type="submit" class="btn btn-primary" value="Submit">
										</div>
										</form>
									</div>
								</div>
							</div>
						</div>
							</div>
						</div>
					{% empty %}
					<div>
						<small class="text-light p-2 fw-bolder">No test send yet</small>
					</div>
					{% endfor %}
				</div>
			</div>
			<div class="col-12 col-md-8 pt-5 pb-5 d-flex justify-content-center align-items-center">
				<div class="row text-center d-flex justify-content-center align-items-center">
					<div class="col-12 col-md-3 m-2 mid-bg">
						<div>
							<!-- Button trigger modal -->
							<button type="button" class="btn btn-lg fw-bolder btn-light-blue" data-bs-toggle="modal" data-bs-target="#RequestId">
								Request Test
							</button>
							<!-- Modal -->
							<div class="modal fade" id="RequestId" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
								<div class="modal-dialog modal-dialog-scrollable">
									<div class="modal-content">
										<div class="modal-header">
											<h1 class="modal-title fs-5" id="staticBackdropLabel">Request Your Test</h1>
											<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
										</div>
										<div class="modal-body">
											<form method="POST" id="NoRefresh" action="{% url 'home' %}">
											{% csrf_token %}
											{{req_form|crispy}}
										</div>
										<div class="modal-footer">
											<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
											<button type="submit" class="btn btn-primary">submit</button>
										</div>
										</form>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="col-12 col-md-3 m-2 mid-bg">
						<div>
							<!-- Button trigger modal -->
							<button type="button" class="btn btn-lg fw-bolder btn-light-green" data-bs-toggle="modal" data-bs-target="#AddTestId">
								Send Results
							</button>
							<!-- Modal -->
							<div class="modal fade" id="AddTestId" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
								<div class="modal-dialog modal-dialog-scrollable">
									<div class="modal-content">
										<div class="modal-header">
											<h1 class="modal-title fs-5" id="staticBackdropLabel">Submit Results</h1>
											<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
										</div>
										<div class="modal-body">
											<form method="POST" id="NoRefresh" action="{% url 'home' %}">
											{% csrf_token %}
											{{add_form|crispy}}
										</div>
										<div class="modal-footer">
											<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
											<button type="submit" class="btn btn-primary">submit</button>
										</div>
										</form>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="col-12 col-md-3 m-2 mid-bg">
						<div>
							<button type="button" class="btn btn-lg btn-light-yellow fw-bolder px-2" data-bs-toggle="modal" data-bs-target="#Delivery">
								Find Deliveries
							</button>
							<!-- Modal -->
							<div class="modal fade" id="Delivery" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
								<div class="modal-dialog modal-dialog-scrollable">
									<div class="modal-content">
										<div class="modal-header">
											<h1 class="modal-title fs-5" id="staticBackdropLabel">Delivery Services</h1>
											<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
										</div>
											<div class="modal-body">
											{% for delivery in deliveries %}
											<div class="d-flex justfy-content-between p-3">
												<p>{{delivery.company_name}}</p> -----
												<p>20mins drive</p>
											</div>
											{% empty %}
											<div>
												<small>No deliveries registered yet</small>
											</div>
											{% endfor %}
										</div>
										<div class="modal-footer">
											<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ok</button>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
<!--Right Side Bar for displaying recent submissions-->
			<div class="col-12 col-md-2 mb-3">
				<small class="text-center text-light">Recent Submissions</small>
				<div class="scrole">
					{% for result in results %}
					<div class="p-2">
						<a href="#" title="Hospital" class="text-decoration-none text-light link-special">{{result.specimen_id}}</a>
					</div>
					{% empty %}
					<small class="text-light fw-bolder">You have submitted any results yet</small>
					{% endfor %}
				</div>
			</div>
<!--End Right Side Bar for displaying recent submissions-->
		</div>
	</div>
</section>
<section id="hero">
		<div class="container">
			<div class="row align-items-center">
				<div class="col-md-6">
					<h1>Welcome to our Referral System</h1>
					<p class="lead">We provide a fast and efficient way for hospitals to send and receive laboratory samples.</p>
					<p class="lead">Our system allows you to easily refer samples to a laboratory and track their progress through the testing process.</p>
					<a href="#" class="btn btn-primary">Learn More</a>
				</div>
				<div class="col-md-6">
					<img src="{% static '/LDMSApp/images/scooter.jpg' %}" alt="Sample Collection" class="img-fluid">
				</div>
			</div>
		</div>
	</section>

<section class="features mt-5 mb-5 ">
	<div class="container">
		<div class="row">
			<div class="col-md-4">
          		<div class="card">
            		<div class="card-body">
              			<h5 class="card-title">Efficient</h5>
              			<p class="card-text">Our system streamlines the sample referral process, reducing delays, cost and improving patient care. We make sure the nature of the sample received is reported to the hospital of interest</p>
            		</div>
          		</div>
        	</div>
        	<div class="col-md-4">
          <div class="card">
            <div class="card-body">
              <h5 class="card-title">Secure</h5>
              <p class="card-text">We use industry-standard encryption to keep your patient data safe and secure. We use state-of-the-art technology and experienced to ensure security and timely mitigation of any threat directed towards us</p>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <div class="card">
            <div class="card-body">
              <h5 class="card-title">Sample Referral</h5>
              <p class="card-text">With our easy-to-use system, you can quickly refer samples to any laboratory for testing. Simply enter the sample details, and they'll take care of the rest. We make sure they are delivered in time to laboratory of interest.</p>
            </div>
          </div>
        </div>
		</div>
	</div>
</section>
<section>
	<div class="text-center mt-4 mb-4">
		<a href="#" class="text-muted">Privacy Policy</a>
	</div>
</section>
{% endblock content %}
<!--=============================End of Content Block=============================-->